import org.labkey.gradle.util.BuildUtils

apply plugin: 'java'
apply plugin: 'java-library'
apply plugin: 'org.labkey.javaModule'

dependencies {
   BuildUtils.addLabKeyDependency(project: project, config: "api", depProjectPath: BuildUtils.getApiProjectPath(project.gradle), depProjectConfig: "apiElements")
   if (project.configurations.findByName("dedupe") != null)
      BuildUtils.addLabKeyDependency(project: project, config: "dedupe", depProjectPath: BuildUtils.getApiProjectPath(project.gradle), depProjectConfig: "external")
   implementation "org.apache.tomcat:tomcat-jsp-api:${apacheTomcatVersion}"
   implementation "org.apache.tomcat:tomcat-jasper:${apacheTomcatVersion}"
   api  "org.labkey.api:labkey-client-api:${labkeyClientApiVersion}"
   external  'com.sun.script.js:jsr223-js-engine:Aug2008'
   external  'org.mozilla:rhino:1.7R3'
}

// TODO move resources files into resources directory to avoid this overlap
sourceSets {
   main {
      resources {
         srcDirs = ['src'] // src is included because it contains some properties and xml files
         exclude '**/*.java'
         exclude '**/*.jsp'
      }
   }
}
